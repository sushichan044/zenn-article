---
title: "Cloudflare Pagesã§Service Bindingsã‚’è¨­å®šã™ã‚‹ã¨ãã®æ³¨æ„"
emoji: "ğŸš§"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [ "cloudflarepages", "cloudflare" ]
published: true
---

ã“ã‚“ã«ã¡ã¯ã€[@sushi-chan](https://zenn.dev/sushichaaaan)ã§ã™ã€‚é›»æ°—é€šä¿¡å¤§å­¦ã§å­¦ç”Ÿã‚’ã—ã¦ã„ã¾ã™ã€‚

ã•ã¦ã€å…ˆæ—¥ã®Cloudflare Developer Weekã§Cloudflare PagesãŒ`wrangler.toml`ã‚’ç”¨ã„ãŸè¨­å®šã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‚’ç™ºè¡¨ã—ã¾ã—ãŸã­ã€‚

@[card](https://blog.cloudflare.com/pages-workers-integrations-monorepos-nextjs-wrangler/)

> Today, weâ€™re excited to announce that you can now configure Pages projects using wrangler.toml â€” the same configuration file format that is already used for configuring Workers.

ã“ã‚Œã«ã‚ˆã‚Šã€Cloudflare KV / D1ã‚„Service Bindingsã®è¨­å®šã‚’`wrangler.toml`ã§ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ã¾ãŸã€Cloudflare Workersã¨å…±é€šã®è¨­å®šæ–¹æ³•ã«ãªã‚‹ã®ã§ç®¡ç†ã‚‚ã‚ˆã‚Šç°¡å˜ã«ãªã‚Šã¾ã—ãŸã€‚

ã¨ã„ã†ã“ã¨ã§ã€éå¸¸ã«ã‚ã‚ŠãŒãŸã„ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ã™ã€‚
æ—©é€Ÿè©¦ã—ã¦ã¿ãŸã®ã§ã™ãŒã€ã©ã†ã‚„ã‚‰Service Bindingsã¾ã‚ã‚Šã®è¨­å®šãŒWorkersã¨ç•°ãªã‚‹ã¿ãŸã„ã§ã™ã€‚

## çµè«–

Cloudflare Workersã§Service Bindingsã‚’ä½¿ã†ã¨ãã¯ã“ã®ã‚ˆã†ã«è¨­å®šã—ã¾ã™ãŒ..ã€‚

```toml
services = [
    { binding = "WORKER", service = "worker-name" },
]
```

Cloudflare Pagesã§ã¯è¿½åŠ ã§`environment`ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ãªãŠã€`environment`ã®ä¸­èº«ã«ã¤ã„ã¦ã¯ã€ã“ã®ã‚­ãƒ¼ã®å­˜åœ¨è‡ªä½“ãŒUndocumentedãªã®ã§åˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚**ãªãœã‹`production`ã‚’æŒ‡å®šã—ãŸã‚‰å‹•ãã¾ã—ãŸã€‚**
ä¸‹ã§ã‚‚ã†å°‘ã—è£œè¶³ã—ã¾ã™ã€‚

```toml
services = [
    { binding = "WORKER", service = "worker-name", environment = "production" },
]
```

:::message
ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã¯`environment(ç’°å¢ƒ)`ã®DropdownãŒã‚ã‚‹ã®ã§ã€ã“ã®ã‚ˆã†ãªå•é¡Œã¯èµ·ãã¾ã›ã‚“ã€‚
![Cloudflare Pagesãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®Service Bindingsè¨­å®šGUI](/images/pages-service-binding.png)
:::

## è£œè¶³

ã©ã†ã‚„ã‚‰æœ¬æ¥Optionalãª`environment`ãŒã€å®Ÿéš›ã«ã¯ãªã„ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã§ããªã„çŠ¶æ…‹ã®ã‚ˆã†ã§ã™ã€‚

@[card](https://community.cloudflare.com/t/cloudflare-pages-cicd-is-broken-how-to-report-fixed/643224/13)

2024å¹´4æœˆ19æ—¥æ™‚ç‚¹ã§ä¿®æ­£ã•ã‚ŒãŸã‹ä¸æ˜ãªã®ã§ã€æ›´æ–°ãŒã‚ã‚Šæ¬¡ç¬¬è¿½è¨˜ã—ã¾ã™ã€‚
